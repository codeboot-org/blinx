<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>BLINX</title>
<style>

html {
  font-size: calc(15px + 0.390625vw);
}

body {
  --cb-header-height: 100px;
  --cb-header-color: #016bb6;
  margin: 0;
  padding-top: calc(0.8 * var(--cb-header-height));
  font-size: 125%;
}

header {
  height: var(--cb-header-height);
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: var(--cb-header-color);
  color: white;
  text-align: center;
  font-family: sans-serif;
  font-size: 36px;
  transition: box-shadow 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  display: none;
}

header.shadow {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

.content {
  padding: 20px;
  margin-bottom: var(--cb-header-height);
}

.iphone, .android, .not-computer {
  display: none;
}

body[data-browser-type="iphone"] header,
body[data-browser-type="android"] header,
body[data-browser-type="iphone"] .iphone,
body[data-browser-type="android"] .android,
body[data-browser-type="iphone"] .not-computer,
body[data-browser-type="android"] .not-computer {
  display: block;
}

img {
  opacity: 0.75;
}

button {
  background-color: yellow;
  border: none;
  border-radius: 10px;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

</style>
<script>

var dev_id = '';
var dev_type = '';

function loaded() {

  window.addEventListener('scroll', function() {
    var header = document.querySelector('header');
    var scrollPosition = window.scrollY || window.pageYOffset;
    var pageHeight = document.documentElement.scrollHeight - window.innerHeight;
    if (scrollPosition > 0) {
      header.classList.add('shadow');
    } else {
      header.classList.remove('shadow');
    }
  });

  var location = window.location;

  // determine device id

  var params = new URLSearchParams(location.search);
  var blx_id = params.get('blx');
  var s31_id = params.get('s31');

  if (blx_id !== null) {
    dev_type = 'blx';
    dev_id = blx_id;
  } else if (s31_id !== null) {
    dev_type = 's31';
    dev_id = s31_id;
  }

  var id = 'BLINX' + dev_id;

  // put id in page title

  document.querySelector('head > title').innerText = id;

  document.querySelector('header').innerHTML = '<svg viewBox="0 0 140 45" xmlns="http://www.w3.org/2000/svg" width="200px"><text x="0" y="42" textLength="140" lengthAdjust="spacingAndGlyphs" font-size="55px"; font-weight="bold"; font-family="sans-serif"; fill="currentColor">' + id + '</text></svg>';

  // determine browser type

  var ua = navigator.userAgent;
  var browser_type = 'computer';

  if (ua.match(/iphone/i)) {
    browser_type = 'iphone';
  } else if (ua.match(/Android/i)) {
    browser_type = 'android';
  }

  document.querySelector('#link').innerText = location.href;

  if (browser_type === 'computer') {
    redirect();
  } else {
    document.body.setAttribute('data-browser-type', browser_type);
  }
}

function redirect() {
    window.location = 'https://codeboot.org/4.0.0/?~blinx-' + dev_type + '=' + dev_id;
}

document.addEventListener('DOMContentLoaded', loaded);

</script>
</head>


<body>


<header>BLINX</header>


<div class="content">


<div class="not-computer">

<p>Please visit this link using a device with a larger screen such as a desktop or laptop computer:</p>

<center>
<b><span id="link"></span></b>
</center>

<div class="iphone">

<p>If that computer is accessible with AirDrop you can do this by pressing the <span style="font-family: sans-serif; font-weight: bold;">Share</span> button as shown below and then choosing your computer in AirDrop.</p>

<center>
<img src="assets/iphone-share-button.png" width="217px"></img>
</center>

</div>


<div class="android">

</div>


<p>Although it is not recommended due to the small screen you can also:</p>

<center>
<button onclick="redirect()">Open the link in this browser</button>
</center>


</div>


</div>

</body>
</html>

